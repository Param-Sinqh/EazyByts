{"ast":null,"code":"import BufferNode from './BufferNode.js';\nimport { bufferAttribute } from './BufferAttributeNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { nodeObject } from '../shadernode/ShaderNode.js';\nimport { varying } from '../core/VaryingNode.js';\nimport { storageElement } from '../utils/StorageArrayElementNode.js';\nclass StorageBufferNode extends BufferNode {\n  constructor(value, bufferType, bufferCount = 0) {\n    super(value, bufferType, bufferCount);\n    this.isStorageBufferNode = true;\n    this.bufferObject = false;\n    this._attribute = null;\n    this._varying = null;\n    if (value.isStorageBufferAttribute !== true && value.isStorageInstancedBufferAttribute !== true) {\n      // TOOD: Improve it, possibly adding a new property to the BufferAttribute to identify it as a storage buffer read-only attribute in Renderer\n\n      if (value.isInstancedBufferAttribute) value.isStorageInstancedBufferAttribute = true;else value.isStorageBufferAttribute = true;\n    }\n  }\n  getInputType( /*builder*/\n  ) {\n    return 'storageBuffer';\n  }\n  element(indexNode) {\n    return storageElement(this, indexNode);\n  }\n  setBufferObject(value) {\n    this.bufferObject = value;\n    return this;\n  }\n  generate(builder) {\n    if (builder.isAvailable('storageBuffer')) return super.generate(builder);\n    const nodeType = this.getNodeType(builder);\n    if (this._attribute === null) {\n      this._attribute = bufferAttribute(this.value);\n      this._varying = varying(this._attribute);\n    }\n    const output = this._varying.build(builder, nodeType);\n    builder.registerTransform(output, this._attribute);\n    return output;\n  }\n}\nexport default StorageBufferNode;\nexport const storage = (value, type, count) => nodeObject(new StorageBufferNode(value, type, count));\nexport const storageObject = (value, type, count) => nodeObject(new StorageBufferNode(value, type, count).setBufferObject(true));\naddNodeClass('StorageBufferNode', StorageBufferNode);","map":{"version":3,"names":["BufferNode","bufferAttribute","addNodeClass","nodeObject","varying","storageElement","StorageBufferNode","constructor","value","bufferType","bufferCount","isStorageBufferNode","bufferObject","_attribute","_varying","isStorageBufferAttribute","isStorageInstancedBufferAttribute","isInstancedBufferAttribute","getInputType","element","indexNode","setBufferObject","generate","builder","isAvailable","nodeType","getNodeType","output","build","registerTransform","storage","type","count","storageObject"],"sources":["D:/dumps/online-learning-platform-main/Frontend/node_modules/three/examples/jsm/nodes/accessors/StorageBufferNode.js"],"sourcesContent":["import BufferNode from './BufferNode.js';\nimport { bufferAttribute } from './BufferAttributeNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { nodeObject } from '../shadernode/ShaderNode.js';\nimport { varying } from '../core/VaryingNode.js';\nimport { storageElement } from '../utils/StorageArrayElementNode.js';\n\nclass StorageBufferNode extends BufferNode {\n\n\tconstructor( value, bufferType, bufferCount = 0 ) {\n\n\t\tsuper( value, bufferType, bufferCount );\n\n\t\tthis.isStorageBufferNode = true;\n\n\t\tthis.bufferObject = false;\n\n\t\tthis._attribute = null;\n\t\tthis._varying = null;\n\n\t\tif ( value.isStorageBufferAttribute !== true && value.isStorageInstancedBufferAttribute !== true ) {\n\n\t\t\t// TOOD: Improve it, possibly adding a new property to the BufferAttribute to identify it as a storage buffer read-only attribute in Renderer\n\n\t\t\tif ( value.isInstancedBufferAttribute ) value.isStorageInstancedBufferAttribute = true;\n\t\t\telse value.isStorageBufferAttribute = true;\n\n\t\t}\n\n\t}\n\n\tgetInputType( /*builder*/ ) {\n\n\t\treturn 'storageBuffer';\n\n\t}\n\n\telement( indexNode ) {\n\n\t\treturn storageElement( this, indexNode );\n\n\t}\n\n\tsetBufferObject( value ) {\n\n\t\tthis.bufferObject = value;\n\n\t\treturn this;\n\n\t}\n\n\tgenerate( builder ) {\n\n\t\tif ( builder.isAvailable( 'storageBuffer' ) ) return super.generate( builder );\n\n\t\tconst nodeType = this.getNodeType( builder );\n\n\t\tif ( this._attribute === null ) {\n\n\t\t\tthis._attribute = bufferAttribute( this.value );\n\t\t\tthis._varying = varying( this._attribute );\n\n\t\t}\n\n\n\t\tconst output = this._varying.build( builder, nodeType );\n\n\t\tbuilder.registerTransform( output, this._attribute );\n\n\t\treturn output;\n\n\t}\n\n}\n\nexport default StorageBufferNode;\n\nexport const storage = ( value, type, count ) => nodeObject( new StorageBufferNode( value, type, count ) );\nexport const storageObject = ( value, type, count ) => nodeObject( new StorageBufferNode( value, type, count ).setBufferObject( true ) );\n\naddNodeClass( 'StorageBufferNode', StorageBufferNode );\n"],"mappings":"AAAA,OAAOA,UAAU,MAAM,iBAAiB;AACxC,SAASC,eAAe,QAAQ,0BAA0B;AAC1D,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,UAAU,QAAQ,6BAA6B;AACxD,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,cAAc,QAAQ,qCAAqC;AAEpE,MAAMC,iBAAiB,SAASN,UAAU,CAAC;EAE1CO,WAAWA,CAAEC,KAAK,EAAEC,UAAU,EAAEC,WAAW,GAAG,CAAC,EAAG;IAEjD,KAAK,CAAEF,KAAK,EAAEC,UAAU,EAAEC,WAAY,CAAC;IAEvC,IAAI,CAACC,mBAAmB,GAAG,IAAI;IAE/B,IAAI,CAACC,YAAY,GAAG,KAAK;IAEzB,IAAI,CAACC,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,QAAQ,GAAG,IAAI;IAEpB,IAAKN,KAAK,CAACO,wBAAwB,KAAK,IAAI,IAAIP,KAAK,CAACQ,iCAAiC,KAAK,IAAI,EAAG;MAElG;;MAEA,IAAKR,KAAK,CAACS,0BAA0B,EAAGT,KAAK,CAACQ,iCAAiC,GAAG,IAAI,CAAC,KAClFR,KAAK,CAACO,wBAAwB,GAAG,IAAI;IAE3C;EAED;EAEAG,YAAYA,CAAA,CAAE;EAAA,EAAc;IAE3B,OAAO,eAAe;EAEvB;EAEAC,OAAOA,CAAEC,SAAS,EAAG;IAEpB,OAAOf,cAAc,CAAE,IAAI,EAAEe,SAAU,CAAC;EAEzC;EAEAC,eAAeA,CAAEb,KAAK,EAAG;IAExB,IAAI,CAACI,YAAY,GAAGJ,KAAK;IAEzB,OAAO,IAAI;EAEZ;EAEAc,QAAQA,CAAEC,OAAO,EAAG;IAEnB,IAAKA,OAAO,CAACC,WAAW,CAAE,eAAgB,CAAC,EAAG,OAAO,KAAK,CAACF,QAAQ,CAAEC,OAAQ,CAAC;IAE9E,MAAME,QAAQ,GAAG,IAAI,CAACC,WAAW,CAAEH,OAAQ,CAAC;IAE5C,IAAK,IAAI,CAACV,UAAU,KAAK,IAAI,EAAG;MAE/B,IAAI,CAACA,UAAU,GAAGZ,eAAe,CAAE,IAAI,CAACO,KAAM,CAAC;MAC/C,IAAI,CAACM,QAAQ,GAAGV,OAAO,CAAE,IAAI,CAACS,UAAW,CAAC;IAE3C;IAGA,MAAMc,MAAM,GAAG,IAAI,CAACb,QAAQ,CAACc,KAAK,CAAEL,OAAO,EAAEE,QAAS,CAAC;IAEvDF,OAAO,CAACM,iBAAiB,CAAEF,MAAM,EAAE,IAAI,CAACd,UAAW,CAAC;IAEpD,OAAOc,MAAM;EAEd;AAED;AAEA,eAAerB,iBAAiB;AAEhC,OAAO,MAAMwB,OAAO,GAAGA,CAAEtB,KAAK,EAAEuB,IAAI,EAAEC,KAAK,KAAM7B,UAAU,CAAE,IAAIG,iBAAiB,CAAEE,KAAK,EAAEuB,IAAI,EAAEC,KAAM,CAAE,CAAC;AAC1G,OAAO,MAAMC,aAAa,GAAGA,CAAEzB,KAAK,EAAEuB,IAAI,EAAEC,KAAK,KAAM7B,UAAU,CAAE,IAAIG,iBAAiB,CAAEE,KAAK,EAAEuB,IAAI,EAAEC,KAAM,CAAC,CAACX,eAAe,CAAE,IAAK,CAAE,CAAC;AAExInB,YAAY,CAAE,mBAAmB,EAAEI,iBAAkB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
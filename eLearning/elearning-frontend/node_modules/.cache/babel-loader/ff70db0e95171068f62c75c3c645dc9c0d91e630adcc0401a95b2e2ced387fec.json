{"ast":null,"code":"import TempNode from '../core/TempNode.js';\nimport { dot, mix } from '../math/MathNode.js';\nimport { add } from '../math/OperatorNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { addNodeElement, tslFn, nodeProxy, float, vec3 } from '../shadernode/ShaderNode.js';\nconst saturationNode = tslFn(({\n  color,\n  adjustment\n}) => {\n  return adjustment.mix(luminance(color.rgb), color.rgb);\n});\nconst vibranceNode = tslFn(({\n  color,\n  adjustment\n}) => {\n  const average = add(color.r, color.g, color.b).div(3.0);\n  const mx = color.r.max(color.g.max(color.b));\n  const amt = mx.sub(average).mul(adjustment).mul(-3.0);\n  return mix(color.rgb, mx, amt);\n});\nconst hueNode = tslFn(({\n  color,\n  adjustment\n}) => {\n  const k = vec3(0.57735, 0.57735, 0.57735);\n  const cosAngle = adjustment.cos();\n  return vec3(color.rgb.mul(cosAngle).add(k.cross(color.rgb).mul(adjustment.sin()).add(k.mul(dot(k, color.rgb).mul(cosAngle.oneMinus())))));\n});\nclass ColorAdjustmentNode extends TempNode {\n  constructor(method, colorNode, adjustmentNode = float(1)) {\n    super('vec3');\n    this.method = method;\n    this.colorNode = colorNode;\n    this.adjustmentNode = adjustmentNode;\n  }\n  setup() {\n    const {\n      method,\n      colorNode,\n      adjustmentNode\n    } = this;\n    const callParams = {\n      color: colorNode,\n      adjustment: adjustmentNode\n    };\n    let outputNode = null;\n    if (method === ColorAdjustmentNode.SATURATION) {\n      outputNode = saturationNode(callParams);\n    } else if (method === ColorAdjustmentNode.VIBRANCE) {\n      outputNode = vibranceNode(callParams);\n    } else if (method === ColorAdjustmentNode.HUE) {\n      outputNode = hueNode(callParams);\n    } else {\n      console.error(`${this.type}: Method \"${this.method}\" not supported!`);\n    }\n    return outputNode;\n  }\n}\nColorAdjustmentNode.SATURATION = 'saturation';\nColorAdjustmentNode.VIBRANCE = 'vibrance';\nColorAdjustmentNode.HUE = 'hue';\nexport default ColorAdjustmentNode;\nexport const saturation = nodeProxy(ColorAdjustmentNode, ColorAdjustmentNode.SATURATION);\nexport const vibrance = nodeProxy(ColorAdjustmentNode, ColorAdjustmentNode.VIBRANCE);\nexport const hue = nodeProxy(ColorAdjustmentNode, ColorAdjustmentNode.HUE);\nexport const lumaCoeffs = vec3(0.2125, 0.7154, 0.0721);\nexport const luminance = (color, luma = lumaCoeffs) => dot(color, luma);\nexport const threshold = (color, threshold) => mix(vec3(0.0), color, luminance(color).sub(threshold).max(0));\naddNodeElement('saturation', saturation);\naddNodeElement('vibrance', vibrance);\naddNodeElement('hue', hue);\naddNodeElement('threshold', threshold);\naddNodeClass('ColorAdjustmentNode', ColorAdjustmentNode);","map":{"version":3,"names":["TempNode","dot","mix","add","addNodeClass","addNodeElement","tslFn","nodeProxy","float","vec3","saturationNode","color","adjustment","luminance","rgb","vibranceNode","average","r","g","b","div","mx","max","amt","sub","mul","hueNode","k","cosAngle","cos","cross","sin","oneMinus","ColorAdjustmentNode","constructor","method","colorNode","adjustmentNode","setup","callParams","outputNode","SATURATION","VIBRANCE","HUE","console","error","type","saturation","vibrance","hue","lumaCoeffs","luma","threshold"],"sources":["D:/dumps/online-learning-platform-main/Frontend/node_modules/three/examples/jsm/nodes/display/ColorAdjustmentNode.js"],"sourcesContent":["import TempNode from '../core/TempNode.js';\nimport { dot, mix } from '../math/MathNode.js';\nimport { add } from '../math/OperatorNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { addNodeElement, tslFn, nodeProxy, float, vec3 } from '../shadernode/ShaderNode.js';\n\nconst saturationNode = tslFn( ( { color, adjustment } ) => {\n\n\treturn adjustment.mix( luminance( color.rgb ), color.rgb );\n\n} );\n\nconst vibranceNode = tslFn( ( { color, adjustment } ) => {\n\n\tconst average = add( color.r, color.g, color.b ).div( 3.0 );\n\n\tconst mx = color.r.max( color.g.max( color.b ) );\n\tconst amt = mx.sub( average ).mul( adjustment ).mul( - 3.0 );\n\n\treturn mix( color.rgb, mx, amt );\n\n} );\n\nconst hueNode = tslFn( ( { color, adjustment } ) => {\n\n\tconst k = vec3( 0.57735, 0.57735, 0.57735 );\n\n\tconst cosAngle = adjustment.cos();\n\n\treturn vec3( color.rgb.mul( cosAngle ).add( k.cross( color.rgb ).mul( adjustment.sin() ).add( k.mul( dot( k, color.rgb ).mul( cosAngle.oneMinus() ) ) ) ) );\n\n} );\n\nclass ColorAdjustmentNode extends TempNode {\n\n\tconstructor( method, colorNode, adjustmentNode = float( 1 ) ) {\n\n\t\tsuper( 'vec3' );\n\n\t\tthis.method = method;\n\n\t\tthis.colorNode = colorNode;\n\t\tthis.adjustmentNode = adjustmentNode;\n\n\t}\n\n\tsetup() {\n\n\t\tconst { method, colorNode, adjustmentNode } = this;\n\n\t\tconst callParams = { color: colorNode, adjustment: adjustmentNode };\n\n\t\tlet outputNode = null;\n\n\t\tif ( method === ColorAdjustmentNode.SATURATION ) {\n\n\t\t\toutputNode = saturationNode( callParams );\n\n\t\t} else if ( method === ColorAdjustmentNode.VIBRANCE ) {\n\n\t\t\toutputNode = vibranceNode( callParams );\n\n\t\t} else if ( method === ColorAdjustmentNode.HUE ) {\n\n\t\t\toutputNode = hueNode( callParams );\n\n\t\t} else {\n\n\t\t\tconsole.error( `${ this.type }: Method \"${ this.method }\" not supported!` );\n\n\t\t}\n\n\t\treturn outputNode;\n\n\t}\n\n}\n\nColorAdjustmentNode.SATURATION = 'saturation';\nColorAdjustmentNode.VIBRANCE = 'vibrance';\nColorAdjustmentNode.HUE = 'hue';\n\nexport default ColorAdjustmentNode;\n\nexport const saturation = nodeProxy( ColorAdjustmentNode, ColorAdjustmentNode.SATURATION );\nexport const vibrance = nodeProxy( ColorAdjustmentNode, ColorAdjustmentNode.VIBRANCE );\nexport const hue = nodeProxy( ColorAdjustmentNode, ColorAdjustmentNode.HUE );\n\nexport const lumaCoeffs = vec3( 0.2125, 0.7154, 0.0721 );\nexport const luminance = ( color, luma = lumaCoeffs ) => dot( color, luma );\n\nexport const threshold = ( color, threshold ) => mix( vec3( 0.0 ), color, luminance( color ).sub( threshold ).max( 0 ) );\n\naddNodeElement( 'saturation', saturation );\naddNodeElement( 'vibrance', vibrance );\naddNodeElement( 'hue', hue );\naddNodeElement( 'threshold', threshold );\n\naddNodeClass( 'ColorAdjustmentNode', ColorAdjustmentNode );\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}